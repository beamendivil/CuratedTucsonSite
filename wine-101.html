<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arizona Wine Professional | Certification Course</title>
    <meta name="description" content="Professional wine training for Arizona restaurant staff. Master high-elevation viticulture, local AVAs, and service standards.">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root {
            /* Arizona Terroir Palette */
            --desert-sandstone: #D4A574;
            --wine-burgundy: #722F37; /* The color of a deep Willcox Mourvèdre */
            --sage-green: #87A96B;    /* High desert scrub */
            --terracotta: #B85450;    /* Sedona red rocks */
            --cream: #F5F1E8;
            --charcoal: #2C2C2C;
            --copper: #B87333;        /* The Copper State */
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F8F4ED 100%);
            color: var(--charcoal);
        }
        
        .font-display { font-family: 'Playfair Display', serif; }
        
        /* Custom UI Elements */
        .btn-primary {
            background: linear-gradient(135deg, var(--wine-burgundy), var(--terracotta));
            color: white;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(114, 47, 55, 0.3);
        }

        .module-card {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid var(--wine-burgundy);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .module-card:hover {
            border-left-color: var(--terracotta);
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .certification-badge {
            background: linear-gradient(135deg, var(--wine-burgundy), var(--terracotta));
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        /* Hero Background with Overlay */
        .hero-bg {
            background-color: var(--wine-burgundy);
            background-image: url('https://images.unsplash.com/photo-1560159752-d77903823469?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80'); /* Placeholder vineyard image */
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .hero-overlay {
            background: linear-gradient(to right, rgba(44, 44, 44, 0.9), rgba(114, 47, 55, 0.7));
        }

        /* Progress Bar */
        .progress-bar {
            background: rgba(212, 165, 116, 0.2);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            background: var(--sage-green);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>

    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-wine-burgundy to-terracotta"></div>
                    <span class="font-display font-bold text-xl text-charcoal">Sonoran Wine Expert</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="font-medium text-charcoal hover:text-wine-burgundy">Modules</a>
                    <a href="#" class="font-medium text-charcoal hover:text-wine-burgundy">About AZ Wine</a>
                </div>
                <button onclick="scrollToModules()" class="btn-primary px-6 py-2 rounded-full font-medium text-sm">
                    Start Certification
                </button>
            </div>
        </div>
    </nav>

    <section class="hero-bg h-[500px] flex items-center justify-center relative mt-16">
        <div class="hero-overlay absolute inset-0"></div>
        <div class="relative z-10 text-center text-white max-w-4xl mx-auto px-4">
            <h1 class="font-display text-4xl md:text-6xl font-bold mb-6 leading-tight">
                Arizona Wine Professional
            </h1>
            <p class="text-lg md:text-xl opacity-90 leading-relaxed max-w-2xl mx-auto">
                Move beyond the basics. Learn the high-elevation viticulture, unique terroir, and heroic winemaking that defines Arizona wine.
            </p>
        </div>
    </section>

    <section id="modules" class="py-20">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="font-display text-4xl font-bold text-charcoal mb-4">Certification Modules</h2>
                <p class="text-gray-600">Complete all 5 modules to earn your certificate.</p>
            </div>
            
            <div class="space-y-4">
                <div class="module-card rounded-2xl p-6" onclick="openPlayer('wine-basics')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="certification-badge">1</div>
                            <div>
                                <h4 class="font-bold text-lg text-charcoal">AZ Wine Basics & Terminology</h4>
                                <p class="text-sm text-gray-600">Diurnal shifts, monsoons, and the language of the high desert.</p>
                            </div>
                        </div>
                        <button class="text-wine-burgundy font-semibold text-sm">Start &rarr;</button>
                    </div>
                </div>

                <div class="module-card rounded-2xl p-6" onclick="openPlayer('wine-service')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="certification-badge">2</div>
                            <div>
                                <h4 class="font-bold text-lg text-charcoal">Professional Desert Service</h4>
                                <p class="text-sm text-gray-600">Temperature control, decanting heavy reds, and handling sediment.</p>
                            </div>
                        </div>
                        <button class="text-wine-burgundy font-semibold text-sm">Start &rarr;</button>
                    </div>
                </div>

                <div class="module-card rounded-2xl p-6" onclick="openPlayer('arizona-wines')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="certification-badge">3</div>
                            <div>
                                <h4 class="font-bold text-lg text-charcoal">The 3 Great AVAs</h4>
                                <p class="text-sm text-gray-600">Deep dive into Sonoita, Willcox, and the Verde Valley.</p>
                            </div>
                        </div>
                        <button class="text-wine-burgundy font-semibold text-sm">Start &rarr;</button>
                    </div>
                </div>

                <div class="module-card rounded-2xl p-6" onclick="openPlayer('food-pairing')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="certification-badge">4</div>
                            <div>
                                <h4 class="font-bold text-lg text-charcoal">Southwestern Pairing</h4>
                                <p class="text-sm text-gray-600">Pairing wines with chiles, heat, and Sonoran gastronomy.</p>
                            </div>
                        </div>
                        <button class="text-wine-burgundy font-semibold text-sm">Start &rarr;</button>
                    </div>
                </div>

                <div class="module-card rounded-2xl p-6" onclick="openPlayer('customer-service')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="certification-badge">5</div>
                            <div>
                                <h4 class="font-bold text-lg text-charcoal">Telling the Story</h4>
                                <p class="text-sm text-gray-600">Overcoming skepticism and selling the "Spirit of Experimentation."</p>
                            </div>
                        </div>
                        <button class="text-wine-burgundy font-semibold text-sm">Start &rarr;</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="course-player" class="fixed inset-0 z-[100] hidden bg-white">
        <div class="h-16 border-b border-gray-200 flex justify-between items-center px-6 bg-gray-50">
            <div class="flex items-center space-x-4">
                <button onclick="closeCoursePlayer()" class="text-charcoal hover:text-wine-burgundy">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <div class="h-6 w-px bg-gray-300"></div>
                <span id="player-module-title" class="font-display font-bold text-lg text-charcoal">Module Title</span>
            </div>
            <div class="flex items-center space-x-4">
                <span id="slide-counter" class="text-sm text-gray-600 font-medium">1 / 5</span>
                <div class="w-32 h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div id="player-progress-bar" class="h-full bg-wine-burgundy transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="flex h-[calc(100vh-4rem)]">
            <div class="w-64 bg-gray-50 border-r border-gray-200 p-6 hidden md:block overflow-y-auto">
                <h4 class="font-bold text-charcoal mb-4 uppercase text-xs tracking-wider">Course Outline</h4>
                <div id="sidebar-list" class="space-y-3 text-sm text-gray-600">
                    </div>
            </div>

            <div class="flex-1 overflow-y-auto p-8 lg:p-16 flex flex-col justify-between">
                <div id="content-stage" class="max-w-3xl mx-auto w-full">
                    </div>
                
                <div class="max-w-3xl mx-auto w-full flex justify-between pt-8 border-t border-gray-100 mt-12">
                    <button id="prev-btn" onclick="prevSlide()" class="px-6 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 transition-colors">Previous</button>
                    <button id="next-btn" onclick="nextSlide()" class="btn-primary px-8 py-2 rounded-lg font-medium shadow-md">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div id="certificate-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-white rounded-2xl max-w-3xl w-full p-2 relative shadow-2xl">
            <button onclick="closeCertificate()" class="absolute top-4 right-4 text-gray-500 hover:text-red-500">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <div class="border-8 border-double border-wine-burgundy p-12 text-center bg-[#FFFAF0]">
                <div class="w-20 h-20 bg-wine-burgundy rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-display font-bold">AZ</div>
                <h2 class="font-display text-4xl md:text-5xl font-bold text-wine-burgundy mb-4">Certificate of Completion</h2>
                <p class="text-charcoal/60 uppercase tracking-widest text-sm mb-8 font-bold">Sonoran Wine Expert Program</p>
                
                <p class="text-lg italic text-charcoal/80 mb-2">This certifies that</p>
                <div class="text-3xl font-display font-bold text-charcoal border-b-2 border-charcoal/20 pb-2 mb-6 inline-block min-w-[300px]" contenteditable="true">
                    Student Name
                </div>
                <p class="text-lg italic text-charcoal/80 mb-8">Has mastered the high-elevation viticulture and unique terroir of Arizona.</p>
                
                <div class="flex justify-between items-end mt-12 px-12">
                    <div class="text-left">
                        <div class="h-px w-40 bg-charcoal mb-2"></div>
                        <p class="text-xs font-bold uppercase text-charcoal/60">Program Director</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xs font-bold uppercase text-charcoal/60" id="cert-date">2025</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- COURSE CONTENT DATA ---
        // This data powers the modal window content
        const courseData = {
            "wine-basics": {
                title: "Module 1: Wine Basics & Terminology",
                slides: [
                    {
                        title: "The Language of the Desert",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">Mastering the Lexicon</h3>
                            <p class="mb-4 text-lg">Before we serve, we must speak. While standard terms like <em>tannin</em> and <em>acidity</em> are universal, in Arizona we add specific descriptors to our vocabulary:</p>
                            <ul class="space-y-3 mb-6">
                                <li class="flex items-start"><span class="text-terracotta mr-2">Create graphic of sun and moon showing temperature drop</span> <strong>Diurnal Shift:</strong> The massive temperature drop between day and night (up to 50°F in Willcox) that preserves acidity in our grapes[cite: 2686].</li>
                                <li class="flex items-start"><span class="text-terracotta mr-2">Create graphic of rain cloud over vineyard</span> <strong>Monsoon:</strong> Our unique summer rain season that creates challenges and miracles in the vineyard unlike anywhere else in the world.</li>
                                <li class="flex items-start"><span class="text-terracotta mr-2">Create graphic of mountain showing elevation</span> <strong>High-Elevation Viticulture:</strong> Farming grapes at 4,000–5,000 ft, resulting in thicker skins and more intense phenolic grip[cite: 2677].</li>
                            </ul>
                        `
                    },
                    {
                        title: "Tasting Arizona: The 5 S's",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">What to Look For</h3>
                            <p class="mb-4 text-lg">Standard tasting applies (See, Swirl, Smell, Sip, Savor), but when tasting Arizona wines, calibrate your palate for:</p>
                            <div class="grid gap-4">
                                <div class="p-4 bg-gray-50 rounded-lg border-l-4 border-wine-burgundy">
                                    <strong>Color:</strong> High UV exposure at 4,500 ft leads to deeper, darker hues in our reds due to thicker grape skins.
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg border-l-4 border-sage-green">
                                    <strong>Nose:</strong> Expect notes of 'dusty earth', 'dried herbs', and 'minerality' characteristic of our volcanic and alluvial soils.
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg border-l-4 border-terracotta">
                                    <strong>Palate:</strong> High alcohol is common due to intense sun, but look for the balancing "nervous" acid kept bright by our cool nights.
                                </div>
                            </div>
                        `
                    }
                ]
            },
            "wine-service": {
                title: "Module 2: Professional Wine Service",
                slides: [
                    {
                        title: "Temperature Control",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">Fighting the Heat</h3>
                            <p class="mb-4">In Southern Arizona, 'Room Temperature' is often 75°F+, which kills the nuance of red wine. Service standards here require vigilance:</p>
                            <ul class="list-disc pl-5 space-y-2 mb-6">
                                <li><strong>Reds:</strong> Serve slightly cooler than standard, around 60-62°F. The alcohol heat in high-ABV Arizona Grenache can overwhelm the fruit if served too warm.</li>
                                <li><strong>Whites:</strong> Don't over-chill aromatic whites like Malvasia Bianca; 50-55°F allows the floral aromatics to bloom.</li>
                            </ul>
                        `
                    },
                    {
                        title: "Decanting Local Wines",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">Sediment and Oxygen</h3>
                            <p class="mb-4">Many top Arizona producers (like Dos Cabezas or Rune) bottle unfiltered wines to preserve texture[cite: 2705].</p>
                            <div class="p-4 bg-gray-50 rounded-lg mb-4">
                                <strong>Sediment:</strong> Arizona reds can throw heavy sediment. Decanting is often mandatory, not just for air, but for clarity.
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <strong>Youth:</strong> Most local wines are consumed young. Aggressive decanting helps soften the 'nervous' energy of a young high-elevation wine.
                            </div>
                        `
                    }
                ]
            },
            "arizona-wines": {
                title: "Module 3: Arizona Wine Regions",
                slides: [
                    {
                        title: "A History of Resilience",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">From 16th Century to Today</h3>
                            <p class="mb-4">While we are a 'New World' region, our roots run deep. Franciscan missionaries planted the first vines in the Southwest nearly 400 years ago[cite: 2081].</p>
                            <p class="mb-4"><strong>The Modern Pioneer:</strong> Dr. Gordon Dutt, a soil scientist from UC Davis, proved in the 1970s that the Sonoita basin's soil was world-class terroir, leading to the state's first commercial vineyards[cite: 2685].</p>
                            <p>Today, we have three distinct American Viticultural Areas (AVAs)[cite: 2676].</p>
                        `
                    },
                    {
                        title: "AVA 1: Sonoita (Est. 1984)",
                        content: `
                            <div class="mb-4 text-sm text-terracotta font-bold uppercase tracking-wider">The Historic Heart</div>
                            <p class="mb-4">Create graphic of Sonoita AVA landscape with Mustang Mountains.</p>
                            <p class="mb-4">Established in 1984 (one of the first in the US!), this AVA sits at nearly 5,000 ft elevation surrounded by the Santa Rita, Huachuca, and Whetstone mountains[cite: 2687].</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Terroir:</strong> Rolling grasslands, reddish clay soils similar to Burgundy.</li>
                                <li><strong>Key Grapes:</strong> Grenache, Syrah, Mourvèdre.</li>
                                <li><strong>Notable Producers:</strong> Callaghan Vineyards (served in the White House 4 times) [cite: 2691], Dos Cabezas [cite: 2713], Rune[cite: 2704].</li>
                            </ul>
                        `
                    },
                    {
                        title: "AVA 2: Willcox (Est. 2016)",
                        content: `
                            <div class="mb-4 text-sm text-terracotta font-bold uppercase tracking-wider">The Powerhouse</div>
                            <p class="mb-4">Create graphic of Willcox Bench vineyard soils.</p>
                            <p class="mb-4">Designated in 2016, this high desert plain (4,000+ ft) produces 75% of the state's wine grapes[cite: 2784].</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Terroir:</strong> A massive alluvial fan with sandy loam soils—perfect for drainage. Harsh conditions force vines to struggle.</li>
                                <li><strong>Key Grapes:</strong> Cabernet Sauvignon, Malbec, Sangiovese.</li>
                                <li><strong>Vibe:</strong> The 'Kansas Settlement'—rustic, farming-focused, vast[cite: 2786].</li>
                            </ul>
                        `
                    },
                    {
                        title: "AVA 3: Verde Valley (Est. 2021)",
                        content: `
                            <div class="mb-4 text-sm text-terracotta font-bold uppercase tracking-wider">The Northern Jewel</div>
                            <p class="mb-4">Our newest AVA is a two-hour drive north of Phoenix. It's a high-desert valley defined by the Verde River[cite: 2741].</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Key Features:</strong> Limestone-rich soils and dramatic diurnal shifts.</li>
                                <li><strong>Key Players:</strong> Caduceus Cellars (Maynard James Keenan) [cite: 2747], Southwest Wine Center (the educational backbone)[cite: 2760].</li>
                            </ul>
                        `
                    }
                ]
            },
            "food-pairing": {
                title: "Module 4: Food & Wine Pairing",
                slides: [
                    {
                        title: "The Spicy Interaction",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">Pairing with Southwestern Heat</h3>
                            <p class="mb-4">Create graphic of Chiltepin peppers and wine glass.</p>
                            <p class="mb-4">Arizona cuisine uses chiles (Hatch, Chiltepin, Jalapeño). This is tricky for wine.</p>
                            <div class="space-y-4">
                                <div class="bg-red-50 p-4 rounded border-l-4 border-red-400">
                                    <strong>The Rule:</strong> High alcohol amplifies heat (capsaicin burn).
                                </div>
                                <div class="bg-green-50 p-4 rounded border-l-4 border-green-400">
                                    <strong>The Fix:</strong> Pair spicy dishes with wines that have residual sugar (like an off-dry Arizona Malvasia Bianca) or lower-tannin reds served cool (like a lighter Grenache). Avoid heavy, oaky Cabernet with super-spicy salsa.
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Regional Matches",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">What Grows Together Goes Together</h3>
                            <ul class="space-y-4">
                                <li>
                                    <strong>Sonoran Wheat Bread & Butter:</strong> Pair with a rich, oxidative Arizona white blend (like Callaghan's 'Lisa's')[cite: 2694].
                                </li>
                                <li>
                                    <strong>Mesquite-Grilled Steak:</strong> Needs a tannic heavyweight like a Willcox Malbec or Aglianico to cut the fat and smoke.
                                </li>
                                <li>
                                    <strong>Street Tacos (Carnitas):</strong> A bright, high-acid Arizona Rosé (often made from Sangiovese or Grenache) cuts through the pork fat perfectly.
                                </li>
                            </ul>
                        `
                    }
                ]
            },
            "customer-service": {
                title: "Module 5: Customer Service Excellence",
                slides: [
                    {
                        title: "We Are Storytellers",
                        content: `
                            <p class="mb-6 text-xl font-display italic text-gray-600">"We have an opportunity to tell a new story... we don't have to follow any trends." <br><span class="text-sm not-italic">- Pavle Milic, FnB / Los Milics [cite: 2670]</span></p>
                            <p class="mb-4">When serving guests, focus on:</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Educate:</strong> Most guests don't know AZ has 3 AVAs. Briefly explain the elevation (4000ft+)—it changes their perception immediately[cite: 2677].</li>
                                <li><strong>Humanize:</strong> Mention the winemakers. Arizona is small enough that you likely know them. Share stories of Kent Callaghan's 30 vintages[cite: 2692].</li>
                            </ul>
                        `
                    },
                    {
                        title: "Handling Skepticism",
                        content: `
                            <h3 class="text-2xl font-display font-bold text-wine-burgundy mb-4">Winning Over the Napa Drinker</h3>
                            <p class="mb-4">You will encounter guests who doubt Arizona wine quality. Here is your playbook:</p>
                            <ol class="list-decimal pl-5 space-y-4">
                                <li><strong>The Strategy:</strong> Don't argue; pour. Offer a 'blind' taste of a top Willcox Cabernet vs. a standard Napa Cab.</li>
                                <li><strong>The Hook:</strong> Focus on the 'Spirit of Experimentation'. Explain that AZ is the frontier of wine[cite: 2668], exciting and unpredictable, whereas established regions are predictable.</li>
                                <li><strong>The Facts:</strong> Remind them that Sonoita was an AVA just 3 years after Napa Valley[cite: 2687]. We aren't new; we're just undiscovered.</li>
                            </ol>
                        `
                    }
                ]
            }
        };

        // --- APP STATE ---
        let state = {
            currentModuleId: null,
            currentSlideIndex: 0,
            progress: {} 
        };

        // --- FUNCTIONS ---

        function scrollToModules() {
            document.getElementById('modules').scrollIntoView({ behavior: 'smooth' });
        }

        // Open the Player
        function openPlayer(moduleId) {
            state.currentModuleId = moduleId;
            state.currentSlideIndex = 0;
            
            const module = courseData[moduleId];
            if (!module) return alert("Module coming soon!");

            // Update UI
            document.getElementById('player-module-title').innerText = module.title;
            document.getElementById('course-player').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling

            // Populate Sidebar
            const sidebarList = document.getElementById('sidebar-list');
            sidebarList.innerHTML = module.slides.map((slide, index) => `
                <div class="p-2 hover:bg-gray-100 rounded cursor-pointer ${index === 0 ? 'text-wine-burgundy font-bold bg-pink-50' : ''}" onclick="jumpToSlide(${index})">
                    ${index + 1}. ${slide.title}
                </div>
            `).join('');

            renderSlide();
        }

        function closeCoursePlayer() {
            document.getElementById('course-player').classList.add('hidden');
            document.body.style.overflow = 'auto';
            // Mark complete logic could go here
            if (state.currentSlideIndex === courseData[state.currentModuleId].slides.length - 1) {
                // simple visual feedback for demo
                const badges = document.querySelectorAll(`[onclick="openPlayer('${state.currentModuleId}')"] .certification-badge`);
                badges.forEach(b => {
                    b.innerHTML = "✓";
                    b.style.background = "#87A96B"; // Sage green
                });
            }
        }

        function renderSlide() {
            const module = courseData[state.currentModuleId];
            const slide = module.slides[state.currentSlideIndex];
            
            // Render Content
            const stage = document.getElementById('content-stage');
            stage.innerHTML = `
                <div class="animate-fade-in">
                    <h2 class="text-3xl font-display font-bold text-charcoal mb-8">${slide.title}</h2>
                    <div class="prose prose-lg text-gray-600 max-w-none">
                        ${slide.content}
                    </div>
                </div>
            `;

            // Update Progress UI
            const total = module.slides.length;
            const current = state.currentSlideIndex + 1;
            document.getElementById('slide-counter').innerText = `${current} / ${total}`;
            document.getElementById('player-progress-bar').style.width = `${(current / total) * 100}%`;

            // Button States
            const nextBtn = document.getElementById('next-btn');
            document.getElementById('prev-btn').disabled = state.currentSlideIndex === 0;
            
            if (current === total) {
                nextBtn.innerText = "Finish Module";
                nextBtn.onclick = () => {
                    closeCoursePlayer();
                    if(state.currentModuleId === 'customer-service') {
                        // If it's the last module, show certificate
                        setTimeout(() => openCertificate(), 500);
                    }
                };
            } else {
                nextBtn.innerText = "Next";
                nextBtn.onclick = nextSlide;
            }
            
            // Update sidebar styling
            const sidebarItems = document.getElementById('sidebar-list').children;
            Array.from(sidebarItems).forEach((item, idx) => {
                if (idx === state.currentSlideIndex) {
                    item.classList.add('text-wine-burgundy', 'font-bold', 'bg-pink-50');
                } else {
                    item.classList.remove('text-wine-burgundy', 'font-bold', 'bg-pink-50');
                }
            });
        }

        function nextSlide() {
            const module = courseData[state.currentModuleId];
            if (state.currentSlideIndex < module.slides.length - 1) {
                state.currentSlideIndex++;
                renderSlide();
            }
        }

        function prevSlide() {
            if (state.currentSlideIndex > 0) {
                state.currentSlideIndex--;
                renderSlide();
            }
        }

        function jumpToSlide(index) {
            state.currentSlideIndex = index;
            renderSlide();
        }

        // --- CERTIFICATE LOGIC ---
        function openCertificate() {
            const date = new Date();
            document.getElementById('cert-date').innerText = date.toLocaleDateString();
            document.getElementById('certificate-modal').classList.remove('hidden');
        }

        function closeCertificate() {
            document.getElementById('certificate-modal').classList.add('hidden');
        }

    </script>
</body>
</html>